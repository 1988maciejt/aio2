from libs.aio import *



class MusicTools:
  
  _K = 1.0594630943592953
  _FREQS = [16.35, 17.32, 18.35, 19.44, 20.6, 21.82, 23.12, 24.49, 25.95, 27.49, 29.12, 30.85, 32.68, 34.62, 36.68, 38.86, 41.17, 43.62, 46.21, 48.96, 51.87, 54.95, 58.22, 61.68, 65.35, 69.24, 73.36, 77.72, 82.34, 87.24, 92.43, 97.93, 103.75, 109.92, 116.46, 123.39, 130.73, 138.5, 146.74, 155.47, 164.71, 174.5, 184.88, 195.87, 207.52, 219.86, 232.93, 246.78, 261.45, 277.0, 293.47, 310.92, 329.41, 349.0, 369.75, 391.74, 415.03, 439.71, 465.86, 493.56, 522.91, 554.0, 586.94, 621.84, 658.82, 698.0, 739.51, 783.48, 830.07, 879.43, 931.72, 987.12, 1045.82, 1108.01, 1173.9, 1243.7, 1317.65, 1396.0, 1479.01, 1566.96, 1660.14, 1758.86, 1863.45, 1974.26, 2091.66, 2216.04, 2347.81, 2487.42, 2635.33, 2792.03, 2958.05, 3133.94, 3320.29, 3517.72, 3726.89, 3948.5, 4183.29, 4432.04, 4695.58, 4974.79, 5270.61, 5584.02, 5916.06, 6267.85, 6640.56, 7035.43, 7453.78, 7897.0, 8366.58, 8864.08, 9391.17, 9949.6, 10541.23, 11168.04, 11832.13, 12535.71, 13281.12, 14070.86, 14907.56, 15794.01, 16733.17]

  def _findToneIdx(Freq : float) -> int:
    bestD = 1000000000
    bestI = 0
    for i in range(len(MusicTools._FREQS)):
      D = abs(Freq - MusicTools._FREQS[i])
      if D < bestD:
        bestD, bestI = D, i
      if D > bestD:
        break
    print(MusicTools._FREQS[bestI])
    return bestI
